<!DOCTYPE html>
<html>
<head>
	<!--Import Google Icon Font-->
	<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
  <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>
	<nav class="  blue lighten-1 " role="navigation">
    <div class="nav-wrapper container">
    <ul class="right hide-on-med-and-down">
    <li><a href="login.html"><img src="icons/sign-in.png" class="icon"> Logout</a></li>
    </ul>
  </nav>
  <div class="row">
    <div class="col s12">
      <div class="card z-depth-5">
        <div class="card-image" >
          <img id="cdImg" src="background4.jpg">
        </div>
        <div class="col s2">
          <img id="crImg" src="icons/user.png" alt="" class="circle responsive-img z-depth-2"> 
        </div>
        <div class="card-content">
         <h4 id="hAdmin">Hello Admin!</h4>
        </div>
      </div>
    </div>
  </div>
	<div class="row">
		<div class="col s12 m2 l2">
			<div class="collection">
				<a href="applicantform.html" class="collection-item"><span class="new badge">4</span>Applicants</a>
				<a href="companyform.html" class="collection-item">Locators</a>
				<a href="postingform.html" class="collection-item"><span class="badge">14</span>Job Postings</a>
				<a href="adminform.html" class="collection-item"><span class="badge">14</span>Admin</a>
				<a href="rraform.html" class="collection-item"><span class="badge">14</span>Request</a>
				<a href="shortlist.html" class="collection-item"><span class="badge">14</span>Shortlist</a>
				<a href="skills.html" class="collection-item"><span class="badge">14</span>Skills Inventory</a>
				<a href="pending1.html" class="collection-item"><span class="badge">14</span>Pending Job Posts</a>
				<a href="hired2.html" class="collection-item"><span class="badge">14</span>List of Hired Applicants</a>
				<a href="archive.html" class="collection-item"><span class="badge">14</span>Archive</a>
				<a href="#!" class="collection-item"><span class="badge">14</span>Reports</a>
				<a href="addIndex" class="collection-item"><span class="badge">14</span>Dashboard</a>
			</div>
		</div>
		<div class="col s12 m10 l10">
			<h3>Locators</h3>
			<a class="waves-effect waves-light btn" href="#modal1">Add Locator</a>
			<!-- Modal Structure -->
			<div id="modal1" class="modal">
				<div class="modal-content">
					<h4>Add Locator</h4>
					<div class="row">
						<form id="ajaxform" class="col s12">
							<div class="row">
								<div class="input-field col s6">
									<input type="hidden" name="comp_id" id="comp_id" class="validate" />							
									<input type="text" name="comp_establistment_name" id="comp_establistment_name" class="validate" placeholder="Establishment" />
									<label for="comp_establistment_name">Establishment</label>
								</div>
								<div class="input-field col s6">
									<input type="text" name="comp_address" id="comp_address" class="validate" />
									<label for="comp_address">Address</label>
								</div>
							</div>
							<div class="row">
								<div class="input-field col s6">
									<input type="number" name="comp_contact" id="comp_contact" class="validate" placeholder="Contact" />
									<label for="comp_contact">Contact No.</label>
								</div>
								<div class="input-field col s6">
									<select name="comp_status" id="comp_status">
										<option value="Registered">Registered</option>
										<option value="Not Registered">Not Registered</option>
									</select>
									<label>Status</label>
								</div>
							</div>
								<div class="row">
								<div class="input-field col s6">
									<input type="email" name="comp_email" id="comp_email" class="validate" placeholder="Email" />
									<label for="comp_email">Email</label>
								</div>
								<div class="input-field col s6">
									<select class="browser-default" id="comp_type" name="comp_type">
									<option value="" disabled selected>Company/Business Type</option>
									<option value="IT RELATED">IT RELATED / ELECTRONICS</option>
									<option value="CIGARETTE">CIGARETTE MANUFACTURING INDUSTRIES</option>
									<option value="MECHANICAl">MECHANICAL / INDUSTRIAL</option>
									<option value="GARMENTS">GARMENTS / TEXTILES / PAPER INDUSTRIES</option>
									<option value="WOOD">WOOD RELATED PRODUCTS</option>
									<option value="JEWELRIES">JEWELRIES / ACCESSORIES</option>

									<option value="BANKING">BANKING / INSURANCE / FINANCING</option>
									<option value="HOTEL">HOTEL / RESTAURANT</option>
									<option value="RETAILING">RETAILING / TRADING</option>
									<option value="SCHOOLS">SCHOOLS</option>
									<option value="TRANSPORTATION">TRANSPORTATION</option>
									<option value="COMMUNICATIONS">COMMUNICATIONS</option>

									<option value="UTILITIES">UTILITIES</option>
									<option value="INFORMATION">INFORMATION TECHNOLOGY SERVICES</option>
									<option value="BPO">BPO / DATA ENCODING SERVICES</option>
									<option value="RECREATIONAL">RECREATIONAL / LEISURE /ENTERTAINMENT/ HEALTH SERVICES</option>
									<option value="KIOSK">KIOSK / CANTEENS / CATERINGS</option>
									<option value="WAREHOUSING ">FORWARDING / WAREHOUSING / TRANSSHIPMENT / TRUCKING / BROKERAGE</option>

									<option value="HOUSING">REALTY / HOUSING</option>
									<option value="AUCTION">CONVERSIONS / AUCTION / MOTOR VEHICLE RELATED WORKS</option>
									<option value="COOPERATIVES">COOPERATIVES</option>
									<option value="COURIER">COURIER SERVICES</option>
									<option value="TRAVEL">TRAVEL AND TOURS / TOURISM-RELATED</option>
									<option value="SECURITY">SECURITY AGENCY</option>

									 <option value="MANPOWER ">MANPOWER SERVICE PROVIDER</option>
									<option value="SUPPORT">SUPPORT SERVICES</option>
									<option value="HANJIN">HANJIN CONTRACTORS</option>
									<option value="OTHER SHIPBUILDING">OTHER SHIPBUILDING / SHIP REPAIR CONTRACTORS</option>
									<option value="OTHER MARINE">YAG-YAG / STEVEDORING / OTHER MARINE / PORT RELATED SERVICES</option>
									<option value="CONSTRUCTION">CONSTRUCTION</option>
								  </select>
								</div>
							</div>	
							
							
							<div class="row">
								<div class="input-field col s6">
									<input type="text" name="comp_username" id="comp_username" class="validate" placeholder="Username" />
									<label for="comp_username">Username</label>
								</div>
								<div class="input-field col s6">
									<input type="text" name="comp_password" id="comp_password" class="validate" placeholder="Fullname" />
									<label for="comp_password">Password</label>
								</div>
							</div>						
							<div class="row">
								<div class="input-field col s12">
									<button class="btn waves-effect waves-light" type="submit" name="action" id="submitme">Submit<i class="material-icons right">send</i></button>
									<button class="btn waves-effect waves-light" type="submit" name="action" id="editme">Update<i class="material-icons right">send</i></button>
								</div>
							</div>
						</form>
					</div>
				</div>
				<div class="modal-footer">
					<a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
				</div>
			</div>
			<table>
				<thead>
					<tr>
						<th data-field="Locators Name">Locators Name</th>
						<th data-field="Address">Address</th>
						<th data-field="Contact">Contact</th>
						<th data-field="Email">Email</th>
						<th data-field="Status">Status</th>
						<th data-field="Company Type">Company Type</th>
						<th data-field="Username">Username</th>
						<th data-field="Password">Password</th>
						<th></th>
					</tr>
				</thead>
				<tbody id="companyTableData">
				</tbody>
			</table>			
		</div>
	</div>
	<!--Import jQuery before materialize.js-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<!--<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>-->
	<script type="text/javascript" src="js/materialize.min.js"></script>
	<script type="text/javascript">
	$(document).ready(function() {
		$('.modal').modal();	
		$('select').material_select();

		$('#submitme').click(function() {
			$('#ajaxform').submit(function(e) {
				var postData = $(this).serializeArray();

				$.ajax({
					url : 'server/company.php?ins=ins',
					type: 'POST',
					data : postData,
					success:function(data, textStatus, jqXHR) {
					},
					error: function(jqXHR, textStatus, errorThrown) {
					}
				});

				e.preventDefault();
			});
		});
		
		$('#editme').click(function() {
			$('#ajaxform').submit(function(e) {
				var postData = $(this).serializeArray();

				$.ajax({
					url : 'server/company.php?edt=edt',
					type: 'POST',
					data : postData,
					success:function(data, textStatus, jqXHR) {
					},
					error: function(jqXHR, textStatus, errorThrown) {
					}
				});

				e.preventDefault();
			});
		});	
		
		livedone();
	});

	function livedone() {
		setTimeout(function() {
			liveFeed();
			livedone();
		}, 200);
	}

	function liveFeed() {
		$.getJSON('server/fetcher.php?datacomp=company', function(jsonData) {
			$('tbody').empty();
			$.each(jsonData, function(idx, obj) {
				$('#companyTableData').append('<tr><td>'+ obj.comp_establistment_name +'</td><td>'+ obj.comp_address +'</td><td>'+ obj.comp_contact +'</td><td>'+ obj.comp_email +'</td><td>'+ obj.comp_status +'</td><td>'+ obj.comp_type +'</td><td>'+ obj.comp_username +'</td><td>'+ obj.comp_password +'</td><td><a href="#modal1" onClick="getCompany('+obj.comp_id+')" class="waves-effect waves-light btn"><i class="material-icons left">mode_edit</i> Edit</a> <a onClick="delCompany('+obj.comp_id+')" class="waves-effect waves-light btn"><i class="material-icons left">delete</i> Archive</a></td></tr>');
			});	
		});	
	}

	function getCompany(id) {
		var dataId = id;
		$.getJSON('server/getter.php?datacomp='+dataId, function(jsonData) {
			$('#comp_id').val(jsonData.comp_id);
			$('#comp_establistment_name').val(jsonData.comp_establistment_name);
			$('#comp_address').val(jsonData.comp_address);
			$('#comp_contact').val(jsonData.comp_contact);
			$('#comp_email').val(jsonData.comp_email);
			$('#comp_status').val(jsonData.comp_status);
			$('#comp_type').val(jsonData.comp_type);
			$('#comp_username').val(jsonData.comp_username);
			$('#comp_password').val(jsonData.comp_password);
		});	
	}
	</script>	
</body>
</html>